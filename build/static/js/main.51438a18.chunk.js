(this.webpackJsonpfoodorder=this.webpackJsonpfoodorder||[]).push([[0],[,,,,,function(e,t,n){e.exports={"cart-items":"Checkout_cart-items__3lzMM",container:"Checkout_container__3oBag",mail:"Checkout_mail__2Salp",total:"Checkout_total__3KPuq",buttons:"Checkout_buttons__1nK_Z",error:"Checkout_error__2O6CG",errorMessage:"Checkout_errorMessage__3Oe80",EmailError:"Checkout_EmailError__3dKbC",inputLine:"Checkout_inputLine__1bGht"}},,,function(e,t,n){e.exports={"cart-items":"Cart_cart-items__2qZ_y",total:"Cart_total__3OJeM",actions:"Cart_actions__5lQPf","button--alt":"Cart_button--alt__2FxwY",button:"Cart_button__3E1g6"}},function(e,t,n){e.exports={"cart-item":"CartItem_cart-item__56mxR",summary:"CartItem_summary__O26mu",price:"CartItem_price__iz_sN",amount:"CartItem_amount__2AqI-",actions:"CartItem_actions__3Y6uo"}},,function(e,t,n){e.exports={button:"HeaderCartButton_button__1mlki",icon:"HeaderCartButton_icon__pw_2r",badge:"HeaderCartButton_badge__3CTM_",bump:"HeaderCartButton_bump__11oQE"}},function(e,t,n){e.exports={meal:"MealItem_meal__1WFgp",description:"MealItem_description__RJKPc",price:"MealItem_price__1VSgR",name:"MealItem_name__14xIf"}},function(e,t,n){e.exports={"cart-item":"CheckoutCartitem_cart-item__3rWjF",summary:"CheckoutCartitem_summary__2LaQr",price:"CheckoutCartitem_price__3rxdj",amount:"CheckoutCartitem_amount__xPsUA"}},,,,function(e,t,n){e.exports={meals:"AvailbleMeals_meals__3J2F3","meals-appear":"AvailbleMeals_meals-appear__3e0bd",loading:"AvailbleMeals_loading__1K9fO",error:"AvailbleMeals_error__2b53P"}},function(e,t,n){e.exports={backdrop:"Modal_backdrop__345PJ",modal:"Modal_modal__30vTB","slide-down":"Modal_slide-down__3puJ5"}},,,function(e,t,n){e.exports={header:"Header_header__1Et9R","main-image":"Header_main-image__irM17"}},,,,,,,,,function(e,t,n){e.exports={footer:"Footer_footer__3aQnd"}},,function(e,t,n){e.exports={summary:"SummaryMeals_summary__uQv0D"}},,function(e,t,n){e.exports={form:"MealItemForm_form__2LTNd"}},function(e,t,n){e.exports={input:"Input_input__3grRN"}},function(e,t,n){e.exports={card:"Card_card__1Amkz"}},,,,,,,,,,function(e,t,n){},,,,,,function(e,t,n){"use strict";n.r(t);var a=n(27),c=n.n(a),r=(n(46),n(3)),s=n(1),i=n.n(s),o=n(21),l=n.n(o),u=n.p+"static/media/Food.da90b1fa.jpg",d=n(11),j=n.n(d),m=n(0),b=function(){return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",children:Object(m.jsx)("path",{d:"M3 1a1 1 0 000 2h1.22l.305 1.222a.997.997 0 00.01.042l1.358 5.43-.893.892C3.74 11.846 4.632 14 6.414 14H15a1 1 0 000-2H6.414l1-1H14a1 1 0 00.894-.553l3-6A1 1 0 0017 3H6.28l-.31-1.243A1 1 0 005 1H3zM16 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM6.5 18a1.5 1.5 0 100-3 1.5 1.5 0 000 3z"})})},h=i.a.createContext({items:[],totalAmount:0,addItem:function(e){},removeItem:function(e){},clearCart:function(){}}),O=function(e){var t=Object(s.useContext)(h),n=Object(s.useState)(!1),a=Object(r.a)(n,2),c=a[0],i=a[1],o=t.items;Object(s.useEffect)((function(){if(0!==o.length){i(!0);var e=setTimeout((function(){i(!1)}),300);return function(){clearTimeout(e)}}}),[o]);var l=t.items.reduce((function(e,t){return e+t.amount}),0),u="".concat(j.a.button," ").concat(c?j.a.bump:"");return Object(m.jsxs)("button",{className:u,onClick:e.onClick,children:[Object(m.jsx)("span",{className:j.a.icon,children:Object(m.jsx)(b,{})}),Object(m.jsx)("span",{children:"Your Cart"}),Object(m.jsxs)("span",{className:j.a.badge,children:[" ",l]})]})},x=n(28),f=n.n(x),p=function(e){return Object(m.jsxs)(s.Fragment,{children:[Object(m.jsxs)("header",{className:l.a.header,children:[Object(m.jsxs)("h1",{children:[Object(m.jsxs)("span",{children:[Object(m.jsx)(f.a,{fontSize:"large"})," "]}),"Matan's Food"]}),Object(m.jsx)(O,{onClick:e.onShowCart})]}),Object(m.jsx)("div",{className:l.a["main-image"],children:Object(m.jsx)("img",{src:u,alt:"img of food"})})]})},_=n(31),v=n.n(_),C=n(30),N=n.n(C),g=function(){return Object(m.jsx)("div",{className:N.a.footer,children:Object(m.jsxs)("p",{children:[Object(m.jsx)(v.a,{fontSize:"x-small"}),"Matan Ben Zahav 2022"]})})},k=n(32),y=n.n(k),A=function(){return Object(m.jsxs)("section",{className:y.a.summary,children:[Object(m.jsx)("h2",{children:"Delicious Food,Deliverd To You!"}),Object(m.jsx)("p",{children:"Choose your favorite meal from our broad selection of available meals and enjoy a delicious lunch or dinner at home."}),Object(m.jsx)("p",{children:"All our meals are cooked with high-quality ingredients, just-in-time and of course by experienced chefs!"})]})},M=n(22),E=n(33),I=n(17),w=n.n(I),S=n(12),H=n.n(S),F=n(34),T=n.n(F),R=n(7),B=n(35),P=n.n(B),V=i.a.forwardRef((function(e,t){return Object(s.useEffect)((function(){}),[]),Object(m.jsxs)("div",{className:P.a.input,children:[Object(m.jsx)("label",{htmlFor:e.input.id,children:e.label}),Object(m.jsx)("input",Object(R.a)({ref:t},e.input))]})})),L=n(36),D=n.n(L),z=function(e){return Object(m.jsx)("div",{className:D.a.card,children:e.children})},J=function(e){var t=Object(s.useRef)(),n=Object(s.useState)(!0),a=Object(r.a)(n,2),c=a[0],i=a[1];return Object(m.jsx)(z,{children:Object(m.jsxs)("form",{className:T.a.form,onSubmit:function(n){n.preventDefault();var a=t.current.value,c=+a;0===a.trim().length||c<1||c>5?i(!1):e.onAddToCart(c)},children:[Object(m.jsx)(V,{ref:t,label:"amount",input:{id:"amount_"+e.id,type:"number",min:"1",max:"5",step:"1",defaultValue:"1"}}),Object(m.jsx)("button",{children:"Add"}),!c&&Object(m.jsx)("p",{children:"Please enter a valid amount (1-5)"})]})})},K=function(e){var t=Object(s.useContext)(h);return Object(m.jsxs)("div",{className:H.a.meal,children:[Object(m.jsx)("div",{children:Object(m.jsxs)("li",{children:[Object(m.jsx)("h3",{className:H.a.name,children:e.name}),Object(m.jsx)("p",{className:H.a.description,children:e.description}),Object(m.jsxs)("p",{className:H.a.price,children:["$",e.price]})]})}),Object(m.jsx)("div",{children:Object(m.jsx)(J,{id:e.id,onAddToCart:function(n){t.addItem({id:e.id,name:e.name,amount:n,price:e.price})}})})]})},Q=function(){var e=Object(s.useState)([]),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!0),i=Object(r.a)(c,2),o=i[0],l=i[1],u=Object(s.useState)(),d=Object(r.a)(u,2),j=d[0],b=d[1];Object(s.useEffect)((function(){var e=function(){var e=Object(E.a)(Object(M.a)().mark((function e(){var t,n,c,r;return Object(M.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://food-order2-ed52b-default-rtdb.firebaseio.com/meals.json");case 2:if((t=e.sent).ok){e.next=5;break}throw new Error("Something went wrong!");case 5:return e.next=7,t.json();case 7:for(r in n=e.sent,c=[],n)c.push({id:r,name:n[r].name,description:n[r].description,price:n[r].price});a(c),l(!1);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e().catch((function(e){l(!1),b(e.message)}))}),[]);var h=n.map((function(e){return Object(m.jsx)(K,{id:e.id,description:e.description,name:e.name,price:e.price},e.id)}));return o?Object(m.jsx)("section",{children:Object(m.jsx)("p",{className:w.a.loading,children:"Loading..."})}):j?Object(m.jsx)("section",{children:Object(m.jsx)("p",{className:w.a.error,children:j})}):Object(m.jsx)("section",{className:w.a.meals,children:Object(m.jsx)(z,{children:Object(m.jsx)("ul",{children:h})})})},q=function(){return Object(m.jsxs)(s.Fragment,{children:[Object(m.jsx)(A,{}),Object(m.jsx)(Q,{})]})},Y=n(18),$=n.n(Y),Z=n(15),G=n.n(Z),W=function(e){return Object(m.jsx)("div",{className:$.a.backdrop,onClick:e.onClose})},U=function(e){return Object(m.jsx)("div",{className:$.a.modal,children:Object(m.jsx)("div",{className:$.a.content,children:e.children})})},X=document.getElementById("overlays"),ee=function(e){return Object(m.jsxs)(s.Fragment,{children:[G.a.createPortal(Object(m.jsx)(W,{onClose:e.onClose}),X),G.a.createPortal(Object(m.jsx)(U,{children:e.children}),X)]})},te=n(8),ne=n.n(te),ae=n(9),ce=n.n(ae),re=function(e){var t=e.price;return Object(m.jsxs)("li",{className:ce.a["cart-item"],children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:e.name}),Object(m.jsxs)("div",{className:ce.a.summary,children:[Object(m.jsx)("span",{className:ce.a.price,children:t}),Object(m.jsxs)("span",{className:ce.a.amount,children:["x ",e.amount]})]})]}),Object(m.jsxs)("div",{className:ce.a.actions,children:[Object(m.jsx)("button",{onClick:e.onRemove,children:"-"}),Object(m.jsx)("button",{onClick:e.onAdd,children:"+"})]})]})},se=function(e){var t=Object(s.useContext)(h),n=function(e){t.addItem(Object(R.a)(Object(R.a)({},e),{},{amount:1}))},a=function(e){t.removeItem(e)},c=Object(m.jsx)("ul",{className:ne.a["cart-items"],children:t.items.map((function(e){return Object(m.jsx)(re,{name:e.name,price:e.price,amount:e.amount,onAdd:n.bind(null,e),onRemove:a.bind(null,e.id)},e.id)}))}),r=+t.totalAmount.toFixed(2),i=t.items.length>0;return Object(m.jsxs)(ee,{onClose:e.onHideCart,children:[c,Object(m.jsxs)("div",{className:ne.a.total,children:[Object(m.jsx)("span",{children:"Total Amount:"}),Object(m.jsxs)("span",{children:["$",r]})]}),Object(m.jsxs)("div",{className:ne.a.actions,children:[Object(m.jsx)("button",{className:ne.a["button--alt"],onClick:e.onHideCart,children:"Close"}),i&&Object(m.jsx)("button",{className:ne.a.button,onClick:function(){e.onHideCart(),e.onShowCheckout()},children:"to Checkout"})]})]})},ie=n(6),oe={items:[],totalAmount:0},le=function(e,t){if("ADD"===t.type){var n,a,c=e.totalAmount+t.item.price*t.item.amount,r=e.items.findIndex((function(e){return e.id===t.item.id})),s=e.items[r];return s?(n=Object(R.a)(Object(R.a)({},s),{},{amount:s.amount+t.item.amount}),(a=Object(ie.a)(e.items))[r]=n):a=e.items.concat(t.item),{items:a,totalAmount:c}}if("REMOVE"===t.type){var i,o,l=e.items.findIndex((function(e){return e.id===t.id})),u=e.items[l];return 1===u.amount?o=e.items.filter((function(e){return e.id!==t.id})):(i=Object(R.a)(Object(R.a)({},u),{},{amount:u.amount-1}),(o=Object(ie.a)(e.items))[l]=i),{items:o,totalAmount:e.totalAmount-u.price}}if("CLEAR"===t.type)return oe},ue=function(e){var t=Object(s.useReducer)(le,oe),n=Object(r.a)(t,2),a=n[0],c=n[1],i={items:a.items,totalAmount:a.totalAmount,addItem:function(e){c({type:"ADD",item:e})},removeItem:function(e){c({type:"REMOVE",id:e})},clearCart:function(){c({type:"CLEAR"})}};return Object(m.jsx)(h.Provider,{value:i,children:e.children})},de=n(5),je=n.n(de),me=function(e){var t=Object(s.useState)(""),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(!1),o=Object(r.a)(i,2),l=o[0],u=o[1],d=e(a);return{value:a,changeValue:function(e){c(e.target.value)},valueIsTouched:function(){u(!0)},hasError:l&&!d,isValid:d,reset:function(){u(!1),c("")}}},be=n(13),he=n.n(be),Oe=function(e){return Object(m.jsx)("li",{className:he.a["cart-item"],children:Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:e.name}),Object(m.jsxs)("div",{className:he.a.summary,children:[Object(m.jsxs)("span",{className:he.a.price,children:["$",e.price]}),Object(m.jsxs)("span",{className:he.a.amount,children:["x ",e.amount]})]})]})})},xe=function(e){var t=Object(s.useState)(!1),n=Object(r.a)(t,2),a=n[0],c=n[1],i=Object(s.useState)(),o=Object(r.a)(i,2),l=o[0],u=o[1],d=Object(s.useContext)(h),j=me((function(e){return""!==e.trim()})),b=j.value,O=j.isValid,x=j.hasError,f=j.changeValue,p=j.valueIsTouched,_=j.reset,v=me((function(e){return""!==e.trim()})),C=v.value,N=v.isValid,g=v.hasError,k=v.changeValue,y=v.valueIsTouched,A=v.reset,M=me((function(e){return e.includes("@")})),E=M.value,I=M.isValid,w=M.hasError,S=M.changeValue,H=M.valueIsTouched,F=M.reset,T=x?je.a.error:"",R=g?je.a.error:"",B=w?je.a.error:"",P=Object(m.jsx)("ul",{className:je.a["cart-items"],children:d.items.map((function(e){return Object(m.jsx)(Oe,{name:e.name,price:e.price,amount:e.amount},e.id)}))}),V=function(e){fetch("https://food-order2-ed52b-default-rtdb.firebaseio.com/persons.json",{method:"POST",body:JSON.stringify({user:e,orderedItems:d.items}),headers:{"Content-Type":"application/json"}}).then((function(){c(!0),d.clearCart()})).catch((function(){u("Something went wrong! the order didn't succsses"),c(!1)}))},L=d.totalAmount.toFixed(2),D=!1;return O&&N&&I&&(D=!0),Object(m.jsx)(ee,{onClose:e.onHideCheckout,children:Object(m.jsxs)("form",{className:je.a.container,onSubmit:function(e){e.preventDefault(),V({fName:b,lName:C,Email:E}),F(),_(),A(),console.log("order pressed")},children:[P,Object(m.jsxs)("div",{className:je.a.total,children:[Object(m.jsx)("span",{children:"Total Amount:"}),Object(m.jsxs)("span",{children:["$",L]})]}),Object(m.jsx)("p",{children:"Please fill your details, the recipt will be send to your E-mail."}),Object(m.jsxs)("div",{className:je.a.container,children:[Object(m.jsxs)("div",{className:je.a.inputLine,children:[Object(m.jsx)("label",{children:"First Name:"}),Object(m.jsx)("input",{className:T,value:b,onChange:f,onBlur:p}),x&&Object(m.jsx)("p",{className:je.a.errorMessage,children:"please fill your first name."})]}),Object(m.jsxs)("div",{className:je.a.inputLine,children:[Object(m.jsx)("label",{children:"Last Name:"}),Object(m.jsx)("input",{className:R,value:C,onChange:k,onBlur:y}),g&&Object(m.jsx)("p",{className:je.a.errorMessage,children:"please fill your last name."})]}),Object(m.jsxs)("div",{className:je.a.inputLine,children:[Object(m.jsx)("label",{children:"Email: "}),Object(m.jsx)("div",{className:je.a.EmailError,children:Object(m.jsx)("input",{className:B,value:E,onChange:S,onBlur:H})}),w&&Object(m.jsx)("p",{className:je.a.errorMessage,children:'please fill your Email (it must have "@").'})]})]}),Object(m.jsxs)("div",{className:je.a.buttons,children:[Object(m.jsx)("button",{type:"button",onClick:e.onHideCheckout,children:"Close"}),Object(m.jsx)("button",{type:"submit",disabled:!D,children:"Order"})]}),l&&Object(m.jsx)("h3",{children:l}),a&&Object(m.jsx)("h3",{children:"Food ordered successfully!"})]})})};var fe=function(){var e=Object(s.useState)(!1),t=Object(r.a)(e,2),n=t[0],a=t[1],c=Object(s.useState)(!1),i=Object(r.a)(c,2),o=i[0],l=i[1];return Object(m.jsxs)(ue,{children:[n&&Object(m.jsx)(se,{onHideCart:function(){a(!1)},onShowCheckout:function(){l(!0)}}),o&&Object(m.jsx)(xe,{onHideCheckout:function(){l(!1)}}),Object(m.jsx)(p,{onShowCart:function(){a(!0)}}),Object(m.jsx)("main",{children:Object(m.jsx)(q,{})}),Object(m.jsx)(g,{})]})};c.a.createRoot(document.getElementById("root")).render(Object(m.jsx)(fe,{}))}],[[52,1,2]]]);
//# sourceMappingURL=main.51438a18.chunk.js.map